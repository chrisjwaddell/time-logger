var BlueMoon=function(){"use strict";function e(e){return"[object Object]"===Object.prototype.toString.call(e)&&"{}"===JSON.stringify(e)}const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];const r=864e5;function a(e,t,r){let a=/^\d{4}$/,o=Number(e);return 0!=o&&(!(""!=o&&!a.test(o))&&(4==String(o).length&&(!(t&&r&&(o<t||o>r))||(console.log(`Year should be in range ${t} to ${r}`),!1))))}function o(e){return e%4==0&&e%100!=0||e%400==0}function n(e,t){return[31,28+(o(t)?1:0),31,30,31,30,31,31,30,31,30,31][e-1]}function s(e,t){let r=new Date(Date.UTC(e.year,e.month-1,e.day,12,0,0,0)),a=new Date(r.valueOf()+t);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate()}}function y(e,t){let r,a=Math.floor(Math.abs(t)/12),o=Math.abs(t%12),s={};t>=0?(Number(e.month)+o>12?(a+=1,r=Number(e.month)+o-12):r=Number(e.month)+o,s={year:Number(e.year)+a,month:r,day:Number(e.day)}):(Number(e.month)-o>0?r=Number(e.month)-o:(a+=1,r=12+Number(e.month)-o),s={year:Number(e.year)-a,month:r,day:Number(e.day)});let y=n(Number(s.month),Number(s.year));return Number(e.day)<=y?s:{}}function u(e,t,r=!0){return r?e>t?7+e-t:t-e:e>=t?e-t:7+e-t}function f(e,t,r=1){if(e===t)return 0;if(e>=r&&t>=r)return t-e;return(t<r?t+7:t)-(e<r?e+7:e)}function h(e){return/^[+|-]\d+$/.test(e)}const i=e=>{if("object"!=typeof e)return new TypeError("Argument is not an object.");const{year:t,month:r,day:a}=e;return a<0||a>31||r>12||r<0?new TypeError("Date is not valid."):function(e,t,r){1==t&&(t=13,r--);2==t&&(t=14,r--);let a=e,o=t,n=r%100,s=parseInt(r/100,10),y=a+parseInt(13*(o+1)/5,10)+n+parseInt(n/4,10)+parseInt(s/4,10)+5*s;y%=7,y-=1,-1===y&&(y=6);return y}(Number(a),Number(r),Number(t))};function d(e,t){return t?t+"\n"+e:e}
/** @license
     *  ----------------------------------------------------------------------------
     *  Blue Moon Date API - <https://github.com/chrisjwaddell/blue-moon>
     *  Licensed under MIT
     *  Copyright Chris Waddell
     *  ----------------------------------------------------------------------------
     */let m=new Date;function l(t,o,l){const p=["day","week","month","year","occur"],v=["day","month","year"];let g,N,w,k=(l=l||{}).startofweek||1,M=void 0===l.returnDate||Boolean(l.returnDate),Y={},P={},I="",D="",$={},F={},S={};if(o)if(e(o))P={year:m.getFullYear(),month:m.getMonth()+1,day:m.getDate()};else{({year:g,month:N,day:w}=o);let t=!1;if(g)if($=b(g,"pd-y"),"absolute"===$.type){if(g=$.offset,!a($.offset,1600,2300))return D=d("Pivot date 'year' is invalid. 'year' is less than 1600 or greater than 2300. You can't have 'year' outside of this range.",D),x()}else"relative"===$.type?(g=$.offset,h($.offset)&&Number($.offset)>500&&(I=d(`Pivot date 'year' is a high number - ${$.offset}. Are you sure this is correct?.`,I))):("current"===$.type||(t=!0,I=d("Pivot date 'year' is invalid. Pivot date will be set to today (the default).",I)),g=m.getFullYear());if(N)if(F=b(N,"pd-m"),"absolute"===F.type){if(N=F.offset,Number(F.offset)<1||Number(F.offset)>12)return D=d("Pivot date 'month' is less than 1 or greater than 12. You can't have 'month' outside of this range.",D),x()}else"relative"===F.type?(N=F.offset,h(F.offset)&&Number(F.offset)>48&&(I=d("Pivot date 'month' is a high number. Why don't you use years and/or months instead.",I))):("current"===F.type||(t=!0,I=d("Pivot date 'month' is invalid. Pivot date will be set to today (the default).",I)),N=m.getMonth()+1);if(w)if(S=b(w,"pd-d"),"absolute"===S.type){if(w=S.offset,Number(S.offset)<1||Number(S.offset)>31)return D=d("Pivot date 'day' is outside the range of less than 1 or greater than 31. You can't have 'day' outside of this range. It shouldn't be higher than 28. Use 'monthend' to get the end of the month whether it's 30th or 31st, it will be the end of the month.",D),x();S.offset>28&&(I="Pivot date 'day' is higher than 28. It shouldn't be higher than 28. Use 'monthend' to get the end of the month whether it's 30th or 31st, it will be the end of the month.")}else"relative"===S.type?(w=S.offset,h(S.offset)&&Number(S.offset)>365&&(I=d("Pivot date 'day' is a high number. Why don't you use years and/or months instead.",I))):("current"===S.type||(t=!0,I=d("Pivot date 'day' is invalid. Pivot date will be set to today (the default).",I)),w=m.getDate());for(let e of Object.keys(o))v.includes(e)||(t=!0,I=d(`${e} is a property that must be one of these property names - ${v.toString()}. Pivot date will be set to today (the default).`,I));if("relative"===S.type)e($)&&e(F)?P=s({day:m.getDate(),month:m.getMonth()+1,year:m.getFullYear()},r*Number(S.offset)):(t=!0,I=d("Pivot date 'day' is relative. You can't have 'month' or 'year' in when 'day' is relative. Pivot date will be set to today (the default).",I));else if(g=J($,m.getFullYear()),"absolute"===$.type||"current"===$.type)if(a(g,1600,2300)||(I=d("'year' is invalid. 'year' is less than 1600 or greater than 2300. You can't have 'year' outside of this range.",I)),"relative"===F.type||"current"===F.type){let e={year:g,month:m.getMonth()+1,day:"monthend"===S.offset?1:w},{year:t,month:r,day:a}=y(e,"current"===F.type?0:Number(F.offset));g=t,N=r,w="monthend"===w?n(N,g):a,P={year:g,month:N,day:"monthend"===S.offset?n(N,g):w}}else"absolute"===F.type?P={year:g,month:N,day:"monthend"===S.offset?n(N,g):w}:(t=!0,I=d("Pivot date has 'day' as an absolute value. It must have 'month' and 'year' in. For relative 'day' such as 'day: \"+1\", it must not have 'month' or 'year' in. Even if you set 'month: \"current\"', that's sufficient. Pivot date will be set to today (the default).",I));else if("relative"===$.type)if(h($.offset)&&Number($.offset)>500&&(I=d(`'year' is a high number - ${$.offset}. Are you sure this is correct?.`,I)),"relative"===F.type){let e={year:g,month:m.getMonth()+1,day:1},{year:t,month:r,day:a}=y(e,Number(F.offset));g=t,N=r,w="monthend"===w?n(N,g):a,P={year:g,month:N,day:w}}else"absolute"===F.type?P={year:g,month:N,day:"monthend"===S.offset?n(N,g):w}:(t=!0,I=d("Pivot date has 'day' as an absolute value. It must have 'month' and 'year' in. For relative 'day' such as 'day: \"+1\", it must not have 'month' or 'year' in. Even if you set 'month: \"current\"', that's sufficient. Pivot date will be set to today (the default).",I));else t=!0,I=d("Pivot date has 'day' as an absolute value. It must have 'month' and 'year' in. For relative 'day' such as 'day: \"+1\", it must not have 'month' or 'year' in. Even if you set 'month: \"current\"', that's sufficient. Pivot date will be set to today (the default).",I);t&&(P={year:m.getFullYear(),month:m.getMonth()+1,day:m.getDate()},g=m.getFullYear(),N=m.getMonth()+1,w=m.getDate())}else P={year:m.getFullYear(),month:m.getMonth()+1,day:m.getDate()};e(P)&&alert("pdresult empty");let T,O,W,C,U={},j={},A={},E={};function x(){let t=n(Number(Y.month),Number(Y.year));return t<Y.day&&(D=d(`The result has the month greater than the number of days in the month. ${JSON.stringify(Y,null,1)} has month ${JSON.stringify(Y.month,null,2)} which has ${t} days in it. You can use 'monthend' as the 'day' value.`,D),Y={}),""===I||Y.day&&Y.month&&Y.year||(D=d("The result has the month greater than the number of days in the month.",D),Y={}),e(Y)||"current"===U.type&&A.type&&A.type,""!==I&&console.log(`%cWARNING - ${I}`,"color: blue; font-size: 16px"),""!==D&&console.error(`%cERROR - ${D}`,"color: red; font-size: 16px"),M&&(Y=c(Y)),Y}for(let e of Object.keys(t))if(!p.includes(e))return D=d(`${e} is a property that must be one of these property names - ${p.toString()}`,D),x();if(!t.day)return D=d("'day' property is empty. It must have a value such as 1 (1st of the month), +4 (4 days ahead), 'Monday'.",D),x();if(U=b(t.day,"d"),"error"===U.type)return D=d("'day' is invalid.",D),x();if("absolute"===U.type){if(Number(U.offset)<1||Number(U.offset)>31)return D=d("'day' is outside the range of less than 1 or greater than 31. You can't have 'day' outside of this range. It shouldn't be higher than 28. Use 'monthend' to get the end of the month whether it's 30th or 31st, it will be the end of the month.",D),x();U.offset>28&&(I="'day' is higher than 28. It shouldn't be higher than 28. Use 'monthend' to get the end of the month whether it's 30th or 31st, it will be the end of the month.")}else"relative"===U.type&&h(U.offset)&&Number(U.offset)>365&&(I=d("'day' is a high number. Why don't you use years and/or months instead.",I));if(t.week){if(j=b(t.week,"w"),"error"===j.type)return D=d("'week' is invalid.",D),x();if("absolute"===j.type){if(Number(j.offset)<1||Number(j.offset)>53)return D=d("'week' is less than 1 or greater than 53. You can't have 'week' outside of this range.",D),x()}else"relative"===j.type&&h(j.offset)&&Number(j.offset)>53&&(I=d("'week' is a high number. Why don't you use years and/or months instead.",I))}if(t.month){if(A=b(t.month,"m"),"error"===A.type)return D=d("'month' is invalid.",D),x();if("absolute"===A.type){if(Number(A.offset)<1||Number(A.offset)>12)return D=d("'month' is less than 1 or greater than 12. You can't have 'month' outside of this range.",D),x();O=Number(A.offset)}else"current"===A.type?O=P.month:"relative"===A.type&&h(A.offset)&&Number(A.offset)>48&&(I=d("'month' is a high number. Why don't you use years and/or months instead.",I))}else O=P.month;if(t.year){if(E=b(t.year,"y"),"error"===E.type)return D=d("'year' is invalid. 'year' isn't a number.",D),x();if("absolute"===E.type){if(!a(E.offset,1600,2300))return D=d("'year' is invalid. 'year' is less than 1600 or greater than 2300. You can't have 'year' outside of this range.",D),x()}else"relative"===E.type&&h(E.offset)&&Number(E.offset)>500&&(I=d(`'year' is a high number - ${E.offset}. Are you sure this is correct?.`,I))}if(t.day){if(T=Number(U.offset),"absolute"===U.type){if(t.week)return D=d("'day' is set as an absolute number. You can't have any setting for 'week'. You can optionally have settings for 'month' and 'year', they must be absolute ie a specific number, but not for 'week'.",D),x();if(W=J(E,P.year),"relative"===A.type){let e={year:W||P.year,month:P.month,day:"monthend"===U.offset?1:T},{year:t,month:r,day:a}=y(e,Number(A.offset));return W=t,O=r,T="monthend"===U.offset?n(O,W):T,Y={year:W,month:O,day:T},x()}return Y={year:W,month:O,day:"monthend"===U.offset?n(O,W):T},x()}if("relative"===U.type)return e(j)&&e(A)&&e(E)?(Y=s({year:P.year,month:P.month,day:P.day},r*Number(U.offset)),x()):(D=d("'day' is relative. You can't have 'week', 'month' or 'year' settings. Eg if it's tomorrow (day: -1), you can't set week, month or year.",D),x());if("current"===U.type){if(I=d("'day' is set to 'current'. If you run this frequently, and if the day is 29, 30 or 31 and you are adding 1 month, some months may not have 31 or 30 days in them so you will get an error with a blank result. You can use 'day: \"+30\" or 'week: \"+4\"'.",I),W=J(E,P.year),"relative"===A.type){let e={year:W||P.year,month:P.month,day:P.day},{year:t,month:r,day:a}=y(e,Number(A.offset));return W=t,O=r,T=a,Y={year:W,month:O,day:T},x()}return Y={year:W,month:O,day:P.day},x()}if("dayofweek"!==U.type){if("dayofweek weeknum"===U.type){if(!e(j))return D=d("'day' is a dayname with a number eg 'Sunday 2', but it means 2nd Sunday of each month, it can't have a 'week' setting.",D),x();if(W=J(E,P.year),"relative"===A.type){let e={year:W||P.year,month:P.month,day:P.day},{year:t,month:r,day:a}=y(e,Number(A.offset));W=t,O=r,T=a}C={year:W,month:O,day:1};let t={year:W,month:O,day:n(O,W)};return/^\*?-?\d{1,1}$/.test(U.offset[1])?"*"===U.offset[1][0]?(Math.abs(Number(U.offset[1].slice(1)))>=4&&(I=d("There are maximum 4 full weeks in a month. Weekdays in the later part of the week for full weeks as you specified don't always occur so you may get a blank result. Instead of opting for the 4th occurrence of a day, you can opt for the last eg 'day: \"Friday -1\"' or 'day: \"Sunday *-1\"'",I)),Number(U.offset[1].slice(1))>0?(Y=function(e,t,r,a=1){let o=u(i(e),a),n=u(a,t);return{day:1+o+n+7*(Number(r)-1),month:e.month,year:e.year}}(C,Number(U.offset[0]),Number(U.offset[1].slice(1)),k),x()):(Y=function(e,t,r,a=1){let o=u(i(e),a,!1)+7,n=u(a,t);return{day:e.day-o+n-7*(Number(r)-1),month:e.month,year:e.year}}(t,Number(U.offset[0]),Math.abs(Number(U.offset[1].slice(1))),k),x())):Number(U.offset[1])>0?(B=C,L=Number(U.offset[0]),R=Number(U.offset[1]),Y={day:1+u(i(B),L)+7*(Number(R)-1),month:B.month,year:B.year},x()):(Y=function(e,t,r,a=1){let o=u(i(e),t,!1);return{day:e.day-o-7*(Number(r)-1),month:e.month,year:e.year}}(t,Number(U.offset[0]),Math.abs(Number(U.offset[1])),k),x()):(D=d("'day' is in an incorrect format. It must be something like 'day: \"Monday 2\"' (2nd Monday of the month), 'day: \"tue -1\"' (Last Tuesday of the month), 'day: \"Friday *2\"' (2nd Friday of the month only counting full weeks) or 'day: \"Monday *-2\"' (2nd last Monday of the month only counting full weeks). The number must be less than 5.",D),x())}return Y={year:P.year,month:P.month,day:P.day},D=d("'day' property has no value. It must have a value such as 1 (1st of the month), +4 (4 days ahead), 'Monday'.",D),x()}{if(W=J(E,P.year),"relative"===A.type){let e={year:W||P.year,month:P.month,day:P.day},{year:t,month:r,day:a}=y(e,Number(A.offset));W=t,O=r,T=a}C={year:W,month:O,day:1};let e={year:W,month:O,day:P.day};if("absolute"===j.type){Number(j.offset);let e=f(i(C),U.offset,k)+7*(Number(j.offset)-1);return Y=s(C,e*r),x()}if("current"===j.type||!j.type){let t=f(i(e),U.offset,k);return Y=s(e,t*r),x()}if("relative"===j.type){let t=f(i(e),U.offset,k)+7*Number(j.offset);return Y=s(e,t*r),x()}}}var B,L,R;function J(e,t){return"absolute"===e.type?Number(e.offset):"current"===e.type?t:"relative"===e.type?t+Number(e.offset):t}}function b(e,r){let a=String(e).trim();if(/^\d+$/.test(a))return{type:"absolute",offset:Number(a)};if(h(a))return{type:"relative",offset:a};if("current"===a)return{type:"current",offset:a};if("monthend"!==a||"d"!==r&&"pd-d"!==r){if("d"===r){let e="",r="",s=a.indexOf(" ");if(-1===s?e=a:(e=a.slice(0,s),r=a.slice(s+1)),3===e.length){let a=(n=e,t.findIndex((e=>e.slice(0,3).toLowerCase()===n.toLowerCase())));return-1!==a?-1===s?{type:"dayofweek",offset:a}:{type:"dayofweek weeknum",offset:{0:a,1:r}}:{type:"error",offset:e}}{let a=(o=e,t.findIndex((e=>e.toLowerCase()===o.toLowerCase())));return-1!==a?-1===s?{type:"dayofweek",offset:a}:{type:"dayofweek weeknum",offset:{0:a,1:r}}:{type:"error",offset:e}}}return{type:"error",offset:"error"}}return{type:"absolute",offset:a};var o,n}function c(e){return new Date(e.year,e.month-1,e.day,0,0,0,0)}function p(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}return function(t,a,o){(o=o||{}).startOfWeek;let n=o.datesBefore,u=o.datesAfter;return n||u?function(t,a,o){(o=o||{}).startOfWeek;let n=o.datesBefore,u=o.datesAfter,f=void 0===o.returnDate||Boolean(o.returnDate),h=[],i=[],d=l(t,a,o);f&&(d=p(d));if(e(d))return[];let m={},v={},g={};m=b(t.day,"d"),v=b(t.month,"m"),g=b(t.year,"y");let N=l(t,a,o);f&&(N=p(N));let w=d;for(let e=0;e<n;e++)d="dayofweek"===m.type.slice(0,9)?l(t,k(t,d,-1,m,v,g),o):k(t,d,-1,m,v,g),f?h.push(c(d)):h.push(d);i=h.reverse(),f?i.push(c(N)):i.push(N);d=w;for(let e=0;e<u;e++)d="dayofweek"===m.type.slice(0,9)?l(t,k(t,d,1,m,v,g),o):k(t,d,1,m,v,g),f?h.push(c(d)):h.push(d);return i;function k(e,t,a,o,n,u,f){let h=e.year?e.year:t.year,i=e.month?e.month:t.month;if("relative"===o.type||"current"===o.type)return s(t,r*a);if("dayofweek"===o.type)return e.month?{year:h+1*a,month:i,day:e.day}:s(t,7*r*a);if("dayofweek weeknum"===o.type){if(e.month)return{year:h+1*a,month:i,day:1};{let e=y(t,1*a);return{year:e.year,month:e.month,day:1}}}return"relative"===n.type||"current"===n.type?y(t,a):"relative"===u.type||"current"===u.type?e.month&&"absolute"===n.type?{year:h+1*a,month:i,day:t.day}:y(t,a):e.month?"absolute"===n.type?e.year?t:{year:h+1*a,month:i,day:t.day}:void 0:(e.year,y(t,a))}}(t,a,o):l(t,a,o)}}();
